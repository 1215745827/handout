---
title: 第三章 | 选择结构
date: 2020-06-05
categories:
 - Java语法入门
tags:
 - Java语法入门
---

::: tip

作者：<a href="mailto:charles7c@126.com">查老师(Charles7c)</a>  
原文：[《第三章 | 选择结构》](https://handout.muyoung.tech/views/java/1_intro/day03_选择结构.html)  
本文为查老师原创文章，商业转载请联系作者获得授权，非商业转载请注明出处。  
本文引用的内容，版权归原作者所有。如有侵权请务必邮件联系我，我会在收到邮件后24小时内进行删除！  

在实践讲义内的练习时，如果遇到问题，强烈推荐阅读 《如何有效地报告 Bug》，更好的提问更容易获得帮助。

:::

## 前言

**C：** 在上一章节，我们掌握了在程序中临时存储数据的方案：变量，掌握了通过键盘与程序交互的`Scanner`，还掌握了在Java程序中可以使用到的运算符。

现实生活中，我们每天都要面对各种选择，有句俗话叫"选择比努力更重要"，不同选择所对应的结果千差万别，程序中执行代码也是如此，我们上章节学到的关系运算符、逻辑运算符就可以让程序执行不同的选择。

而且对于初级的应用开发者（码农），未来每天的工作就是用今天的选择结构写逻辑，所以它们学起来也不难，因为经常要使用啊！

<img src="http://img.muyoung.tech/day03_0_0.png" alt="day03_0_0" style="zoom: 33%;" />



## 课程简介

### 课程任务

- 使用if选择结构实现幸运抽奖
- 使用switch选择结构实现颁奖程序

### 课程目标

- **掌握基础if选择结构** :fire:
- **掌握if-else互斥分支选择结构** :fire:
- **掌握if - else if - else 多重选择结构** :fire:
- **掌握嵌套if选择结构** :fire:
- **掌握switch选择结构** :fire:
- 了解switch和if结构的区别​



## 1. if选择结构

### 1.1 流程控制语句

**C：** 在前两章的学习中，我们也写了几行代码，而且也明白编写的代码是自上而下依次执行下来的，编写几行，就会自上而下执行几行。这种"一根筋"的代码被称为 **顺序控制语句**  。

![day03_1_1](http://img.muyoung.tech/day03_1_1.png)

#### 1.1.1 顺序控制语句

**顺序控制语句** 是程序中最简单的流程控制，按照代码执行的先后顺序，依次执行，程序中的大多数代码都是这样执行的。

![day03_1_2](http://img.muyoung.tech/day03_1_2.png)

#### 1.1.2 选择控制语句

**C：** 今天我们要学习的选择结构就属于 **选择控制语句** ， **选择控制语句** 也被称为分支结构语句，选择结构有特定的语法规则，代码要执行具体的逻辑运算进行判断，逻辑运算的结果有两个或多个（真或假），所以产生了选择，根据不同的选择就会执行不同的代码。除了选择结构，下章节我们还要学习循环控制语句。

![day03_1_3](http://img.muyoung.tech/day03_1_3.png)

#### 1.1.3 流程图

**C：** 以后的程序逻辑越来越复杂，我们可以通过流程图，用图示的方式，来反映出特定主体为了满足特定需求而进行的，有特定逻辑关系的一系列操作过程。例如：京东的购物流程，特定主体是用户、特定需求是购物、特定逻辑关系是用户购物过程中的一系列操作。

![day03_1_4](http://img.muyoung.tech/day03_1_4.png)

为便于识别，绘制流程图的习惯做法是：圆角矩形表示开始与结束，矩形表示操作步骤、用于普通工作环节，菱形表示问题判断（审核/审批/评审）环节，用平行四边形表示输入和输出，箭头代表工作流方向。

![day03_1_5](http://img.muyoung.tech/day03_1_5.png)

下方是`JBOA`办公自动化系统的业务流程设计图，对照流程图图示理解下报销流程。

![day03_1_6](http://img.muyoung.tech/day03_1_6.png)

流程图中有这么多符号，想要更好更快的绘制，我们可以使用一些流程图绘制工具！例如微软的`visio`或是直接使用在线流程图绘制网站（`Process On`：https://www.processon.com/，使用挺顺手，就是容量小，免费用户只能创建9张图，想新建更多，要么充钱要么导出图后删除一些无用的，记得删除后再进入回收站内删除，否则也会占用容量）。

![day03_1_7](http://img.muyoung.tech/day03_1_7.png)

![day03_1_8](http://img.muyoung.tech/day03_1_8.png)

### 1.2 基础if选择结构

**C：** 刚才我们介绍了选择控制语句，那么在Java中，如果要实现选择控制语句有哪些语法呢？首先我们来看看第一种最基础的选择结构语法：`基础if选择结构`！它是最简单的选择结构，也只能用于一种分支的处理。

![day03_1_9](http://img.muyoung.tech/day03_1_9.png)

```java
// 语法
// 条件往往是由关系运算符来组成的判断
// 条件的结果是一个boolean值，要么为true(真)，要么为false(假)
if(条件){
	// 条件为真时执行的代码块
}
```

![day03_1_10](http://img.muyoung.tech/day03_1_10.png)

**模拟案例：如果佩奇Java成绩大于90分，查老师将会奖励她一部OnePlus 8 Pro。** 

```java
// 声明一个变量用来存储佩奇的Java成绩
int score = 91;
// 套用基础if语法
if(score > 90){
    System.out.println("查老师奖励了一部OnePlus 8 Pro。");
}
System.out.println("程序结束！");
```



### 1.3 复杂条件的基础if

**C：** 套用下语法，就实现了一个很简单的选择案例。接下来再看看下方案例中的条件，是不是没有那么容易了，面对这种场景，单靠普通的关系运算符显然不太顺手，还需要结合逻辑运算符才会更合适一些。

**模拟案例：如果乔治Java成绩大于90分，并且音乐成绩大于80分时，或者Java成绩等于100分，音乐成绩大于70分时，查老师会奖励他一部OnePlus 8 Pro。**  

```java
// 声明变量分别存储乔治的Java成绩和音乐成绩
int jScore = 60;
int mScore = 81;

// 关系运算符结合逻辑运算符
// 考虑到运算符的优先级，可以使用()来提升部分表达式的优先级，也是复杂条件下增加可读性的方法
// ()的添加应该成为一种本能，它是义务教育阶段学数学后的条件反射
if((jScore > 90 && mScore > 80) || (jScore == 100 && mScore > 70)){
    System.out.println("查老师奖励了一部OnePlus 8 Pro。");
}
System.out.println("程序结束！");
```

### 1.4 if-else选择结构

**C：** 我们敲完上方的代码发现，如果条件不满足的话，好像什么处理情况也没有，这怎么可能，只有老师奖励学生，没有学生受罚？我们再来看个案例。

**模拟案例：如果苏西Java考试成绩大于90分，查老师就奖励她一部OnePlus 8 Pro，否则就罚她给查老师买一部OnePlus 8 Pro。**  

面对这个案例，我们还是可以采用基础If语法，但是明知道两个结果是互斥的，还要再写一次判断，有点麻烦。

```java
if(score > 90){
    System.out.println("查老师奖励了一部OnePlus 8 Pro。");
}
if(score <= 90){
    System.out.println("苏西哭着给查老师买了一部OnePlus 8 Pro，查老师很感动。");
}
```

这时候我们可以使用`if-else`语法来解决这种条件互斥的情况。`if-else`选择结构可以处理简单的互斥分支情况。

![day03_1_11](http://img.muyoung.tech/day03_1_11.png)

```java
if(条件){
    // 代码块1
}else{
    // 代码块2
}
```

![day03_1_12](http://img.muyoung.tech/day03_1_12.png)

```java
// 声明一个变量存储苏西的Java考试成绩
int score = 90;
// 套用if-else语法
// if：如果  else：否则
if(score > 90){
    System.out.println("查老师奖励了一部iPhone 11 Pro。");
}else{
    System.out.println("苏西哭着给查老师买了一部OnePlus 8 Pro，查老师很感动。");
}
```

实际上我们学的这些语法，在你念着案例时就能把代码写出来，如果（if）苏西Java考试成绩（score）大于90分（> 90），查老师就奖励她一部OnePlus 8 Pro（System.out.println("xxx");），否则（else）就罚她给查老师买一部OnePlus 8 Pro（System.out.println("xxx");）。

### 1.5 多重if选择结构

**C：** 我们掌握了`基础if`来处理单分支选择，也掌握了`if-else`来处理互斥分支，但是如果出现了更多种的分支情况怎么办？

**模拟案例：如果佩奇Java考试成绩大于等于80分，查老师就奖励她一部OnePlus 8 Pro，如果佩奇Java考试成绩大于等于60分，查老师就奖励她一部一加云耳，否则就罚她给查老师买一部iPhone 11 Pro。** 

`if-else`只能处理互斥分支，使用`基础if`的方案如下。

```java
// 声明一个变量存储佩奇的Java考试成绩
int score = 90;
if(score >= 80){
    System.out.println("查老师奖励她一部OnePlus 8 Pro。");
}
// 如果不添加&&来进行限制，那么佩奇考试成绩>80分时，查老师将会破产
if(score >= 60 && score < 80){
    System.out.println("查老师奖励她一部一加云耳。");
}
if(score < 60){
    System.out.println("佩奇哭着给查老师买了一部iPhone 11 Pro，查老师很感动。");
}
```

毫无疑问，`基础if`需要添加多次条件，但对于范围型判断来讲，如果不把范围控制好，那么后续的if条件就会出现多余判断的情况，因为每个`基础if`都是独立的，Java为此提供了一种简化的方案：`多重if选择结构`。

**多重if选择结构：** 可以处理分段的条件分支情况，它是自上而下进行选择判断，只要有一个条件满足，剩下的条件都不再执行判断。所以不要随意排列条件，把容易满足的条件放在下方，不然容易满足的条件判断为`true`后，后续其他条件都不会再判断了。

```java
if(成绩 >= 80){
    // 代码块1
}else if(成绩 >= 60){ // 可以有多个else if
    // 代码块2
}else{ // 可以省略
    // 代码块3
}
```

![day03_1_13](http://img.muyoung.tech/day03_1_13.png)

```java
// 存储考试成绩
int score = 90;
// 套用if - else if - else语句
/*
 * 注意事项：
 * 		1.else if 必须配合if使用，if只能写一个，else if可以写很多个
 *   	2.if-else if结构是自上而下进行判断选择的，只要上方的一个条件成立，下方的其他条件不再执行
 * 		3.可以结合else来使用，当上方所有条件都不成立时，就会执行else代码块内容
 */
if(score >= 80){
    System.out.println("查老师奖励她一部OnePlus 8 Pro。");
}else if(score >= 60){ // 不需要限制 < 80的条件了，因为只要符合>=80，就不再向下判断
    System.out.println("查老师奖励她一部一加云耳。");
}else{
    System.out.println("佩奇哭着给查老师买了一部iPhone 11 Pro，查老师很感动。");
}
```

### 1.6 嵌套if选择结构

**C：** 生活在北上广深的各位同学们，对早晚高峰的地铁站印象很深了吧？在乘坐地铁前，我们需要有两次检查，第一次是安全检查，第二次是车票检查。火车站也是类似的。

面对这种多次检查，它的逻辑不是`多重If`这种自上而下依次执行的判断，而是当通过第一层判断后才可以进入第二层判断，面对这种场景，我们可以把if语句再灵活使用一点。

![day03_1_14](http://img.muyoung.tech/day03_1_14.png)

**嵌套if** 的应用场景：**在之前条件满足的前提下，再增加额外的判断** 。它可以通过外层语句和内层语句的协作，增强程序的灵活性。在查老师看来，当业务场景描述清楚的时候，福至心灵下就会自然而然的写出来对应的代码了。

```java
if(条件1){
    if(条件2){
        // 代码块1
    }else{
        // 代码块2
    }
}else{
    // 代码块3
}
```

![day03_1_15](http://img.muyoung.tech/day03_1_15.png)



**模拟案例：学校举行运动会，百米赛跑跑入10秒内的学生有资格进决赛，然后根据性别进入男子组或女子组**  

```java
// 声明一个变量存储百米成绩
int score = 9;
// 声明一个变量存储性别
String gender = "女";
// 套用嵌套if语句
// 注意事项：如果没有进入决赛，也就不会分配组别了
if(score < 10){ // 可以进入决赛
    System.out.println("进入了决赛！");
    if("男".equals(gender)){ // 分配组别
        System.out.println("进入了男子组！");
    }else{
        System.out.println("进入了女子组！");
    }
}
```

**补充1： 字符串的比较不要使用==，而是采用equals()方法。** （先了解，知道使用equals方法即可）

```java
// == 号可以比较基本数据类型的值是否相等(八大基本数据类型)
int num1 = 10;
int num2 = 10;
// System.out.println(num1 == num2); // true

char gender1 = '男';
char gender2 = '男';
// System.out.println(gender1 == gender2); // true

// ------------------

// 如果是字符串，不要使用==号比较，而是使用equals()方法
// 因为字符串是引用数据类型，==号如果比较引用数据类型，实际上比较的是数据的地址值而不是比较内容
// 所以==很有可能导致你的字符串内容比较出问题，因为它比较的是地址值
// 即使你发现两个字符串用==也比较为true了，那其实是涉及到常量池的概念了。
// 先记住不要用==比较字符串就可以了！！！后期面向对象阶段学完就知道为啥了。
String str1 = "我是一个字符串";
String str2 = "我是一个字符串";
System.out.println(str1.equals(str2));
```

**补充2： 随机数的生成方法**  

随机数是我们在程序中经常要使用到的，前期我们用它可以模拟很多业务，下面介绍一个Java中生成随机数的玩法。

```java
// Math.random()可以随机生成[0.0,1.0)之间的小数
// [0.0,1.0)表示一个区间，等价于0.0 <= num1 < 1.0
// 左闭右开就是包含左边数据，不包含右边的数据
// [0.0,1.0]也表示一个区间，等价于0.0 <= num1 <= 1.0
// 左闭右闭就是包含左边数据，也包含右边的数据
// 想了解更多区间的内容，自己去百度下相关数学知识
double num1 = Math.random();

/*
 * 基于上方的方法，如果想指定生成某个范围内的随机数，可以推导出一个公式。
 * 随机数公式为：(int)(Math.random() * (max - min)) + min;
 */
// 案例1：生成[0,10)之间的随机整数
// [0.0,1.0) * 10 --> [0,10)
int num2 = (int)(Math.random() * 10);

// 案例2：生成[5,14)之间的随机整数
int num3 = (int)(Math.random() * 9) + 5;

// 案例3：如果想生成[6,20]之间的随机整数，那可以将其理解为[6,21)，这样就可以再套上方的公式了
int num4 = (int)(Math.random() * 15) + 6;
```

## 2. switch选择结构

### 2.1 为什么使用switch选择结构

**C：** `if系列选择结构`我们已经学习完了，我们再来模拟实现一个案例，练习一下。

**模拟案例：小杨参加了创造502节目。** 

- 如果获得第一名，将会担任《诛仙》女主角
- 如果获得第二名，将会担任《斗罗大陆》女主角
- 如果获得第三名，将会担任《永夜》女主角

```java
// 存储名次
int score = 2;
// 使用多重if
if(score == 1){
    System.out.println("小杨将会担任《诛仙》女主角！");
}else if(score == 2){
    System.out.println("小杨将会担任《斗罗大陆》女主角！");
}else if(score == 3){
    System.out.println("小杨将会担任《永夜》女主角！");
}
```

从需求介绍中可知，案例的条件是简单的等值判断，相比于范围判断，在等值判断时使用`多重if`有点大材小用，而且实话就是if多了阅读起来真挺费劲的，所以查老师给大家再安利一个Java中提供的选择结构语句：`switch选择结构`。

这个switch可不是你想的switch。

<img src="http://img.muyoung.tech/day03_2_1.png" alt="day03_2_1" style="zoom:33%;" />

我们来看看它的语法：

```java
switch(表达式){
    case 常量1:
        语句;
        break;
    case 常量2:
        语句;
        break;
        // ....
    default:
        语句;
        break;
}
```

再套用它的语法来解决一下刚才的问题，是不是发现清晰多了？

```java
// 存储名次
int score = 2;
// 使用switch
switch(score){
    case 1:
        System.out.println("小杨将会担任《诛仙》女主角！");
        break;
    case 2:
        System.out.println("小杨将会担任《斗罗大陆》女主角！");
        break;
    case 3:
        System.out.println("小杨将会担任《永夜》女主角！");
        break;
}
```

**switch使用注意事项：** 

1. 在满足等值判断的前提下，才可以使用`switch`来进行判断，不可用于范围型判断。

2. 如果没有特殊要求，必须给每一个`case`后追加`break`。

   `break`是表示结束某个`case`，如果没有`break`，会出现`case`的穿透性，即继续往下执行直到遇到下一个`break`结束！

   ```java
   // 存储名次
   int score = 2;
   // 使用switch
   switch(score){
       case 1:
           System.out.println("小杨将会担任《诛仙》女主角！");
       case 2:
           System.out.println("小杨将会担任《斗罗大陆》女主角！");
           break;
       case 3:
           System.out.println("小杨将会担任《永夜》女主角！");
           break;
   }
   ```

   上方的代码，如果`case 1`后缺少一个`break`，那么输出结果是将会是。

   ```java
   小杨将会担任《诛仙》女主角！
   小杨将会担任《斗罗大陆》女主角！
   ```

3. 建议加上一个`default`来进行默认处理。

4. `switch`的表达式支持的类型有：`int`、(`short`、`byte`、`char`可以自动类型转换为`int`)，`枚举类型(Enum)`、`String`（自JDK1.7开始，`switch`支持了字符串的等值判断，参考官方release介绍：https://docs.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html）。

   ![day03_2_2](http://img.muyoung.tech/day03_2_2.png)

   ![day03_2_3](http://img.muyoung.tech/day03_2_3.png)

### 2.2 switch和if的对比

到此为止，Java中的选择结构我们就学习完了，别看语法挺多，论派系的话只有两个，一个是`if`，一个是`switch`，而且`switch`和`多重if`也很相像，理解起来也比较容易了。

**相同点：** 都是用来处理多分支条件的结构。

**不同点：** `switch`只能处理等值条件判断的情况，`多重if`选择结构没有`switch`选择结构的限制，特别适合某个变量处于某个连续区间时的情况（范围型判断）。

`switch`从效率方面考虑，是要比`if`选择结构执行快（有兴趣自己百度下执行原理），但是随着硬件的发展，这两者之间的效率差距几乎可以忽略不计。

其实Java近几代版本中对`switch`的优化一直在进行，之所以现在`switch`用的越来越少，其实不见得是不想用，而是当一个程序员接盘别人项目的时候，往往这个项目里已经有很多`if和else`的代码了，这个时候要是改成`switch`的话，那么不仅达不到自己想要的结果，甚至还会造成框架崩溃，所以为了不做灭霸，接盘程序员就会在后面再加几条`if和else`，长久之下，`switch`使用率自然不高了！

## 5. 作业

### 5.1 课后作业

- 首先自行敲一遍老师上课演示时的代码（注释量要求不低于40%），并整理笔记，理清整堂课思路

- **使用if编写程序：** 从键盘获取用户名和密码，如果用户名和密码都正确，那么就显示"欢迎进入xxx的世界！"，否则就提示"用户名或密码错误！"。 提示：可以预先设定一个假的用户名和密码。

  <img src="http://img.muyoung.tech/day03_5_1.png" alt="day03_5_1" style="zoom:50%;" />

- 从控制台输入要出的拳，1代表石头、2代表剪刀、3代表布，电脑 **随机** 出拳，比较胜负，完成此代码功能。

  <img src="http://img.muyoung.tech/day03_5_2.png" alt="day03_5_2" style="zoom:50%;" />

  <img src="http://img.muyoung.tech/day03_5_3.png" alt="day03_5_3" style="zoom:50%;" />

- 实现幸运抽奖功能：输入4位会员号，如果会员号的百位数字等于产生的随机数字，那么这个会员就是幸运会员，将奖励一部iPhone 11 Pro！进行合理结果提示。

### 5.2 预习作业

- 举例说明，循环结构用于解决哪些问题？
- 要求使用加法运算符对100个数值2求和，请指出循环条件和循环操作
- Java循环结构中使用了哪些关键字？
- while循环的特点是什么？
- 程序调试有哪些步骤？

## 后记

**C：** 选择结构出现后，我们就可以把现实生活的业务逻辑，在程序中模拟实现了。这些流程控制语句就像汉语拼音和基本汉字一样基础，好好记忆下语法。在微信公众号内回复"选择结构"，就可以获取今天的作业，把作业和课堂案例实现一下，千万要动手实现！因为理解和熟练掌握是两回事！就好像你在抖音上看了那么多生活上的教程：叠衣服、弹吉他.....，但你从没练过，那永远是学不会的，不要眼高手低。

